class AttributeMapResolver < DeviseSamlAuthenticatable::DefaultAttributeMapResolver
  def attribute_map
    issuer = saml_response.issuers.first
    Rails.logger.info("[#{self.class.name}] issuer=#{issuer.inspect}")
    if issuer == "http://localhost:8009/saml/auth"
      {
        "myemailaddress" => {"resource_key" => "email", "attribute_type" => "single"},
        "myname" => {"resource_key" => "name", "attribute_type" => "single"},
        "groups" => {"resource_key" => "groups", "attribute_type" => "multi"}
      }
    else
      {}
    end
  end
end
